{"remainingRequest":"/Users/mdzz/Desktop/公开课/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/mdzz/Desktop/公开课/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mdzz/Desktop/公开课/src/App.vue","mtime":1621437505650},{"path":"/Users/mdzz/Desktop/公开课/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mdzz/Desktop/公开课/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mdzz/Desktop/公开课/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mdzz/Desktop/公开课/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBjbGllbnRZID0KICBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0OwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFsKICAgICAgICAvLyBtdXRlZCDmjqfliLbpnZnpn7MKICAgICAgICB7CiAgICAgICAgICBpZDogMSwKICAgICAgICAgIG11dGVkOiB0cnVlLAogICAgICAgICAgc3JjOiByZXF1aXJlKCIuL2Fzc2V0cy92aWRlb3MvMS5tcDQiKSwKICAgICAgICAgIHRpdGxlOiAi6Zic6ZizIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiAyLAogICAgICAgICAgbXV0ZWQ6IHRydWUsCiAgICAgICAgICBzcmM6IHJlcXVpcmUoIi4vYXNzZXRzL3ZpZGVvcy8yLm1wNCIpLAogICAgICAgICAgdGl0bGU6ICLnjovlmInlsJQiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgaWQ6IDMsCiAgICAgICAgICBtdXRlZDogdHJ1ZSwKICAgICAgICAgIHNyYzogcmVxdWlyZSgiLi9hc3NldHMvdmlkZW9zLzMubXA0IiksCiAgICAgICAgICB0aXRsZTogIuWuieS4nOWwvCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBpZDogNCwKICAgICAgICAgIG11dGVkOiB0cnVlLAogICAgICAgICAgc3JjOiByZXF1aXJlKCIuL2Fzc2V0cy92aWRlb3MvNC5tcDQiKSwKICAgICAgICAgIHRpdGxlOiAi6a2P5pmoIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGlkOiA1LAogICAgICAgICAgbXV0ZWQ6IHRydWUsCiAgICAgICAgICBzcmM6IHJlcXVpcmUoIi4vYXNzZXRzL3ZpZGVvcy81Lm1wNCIpLAogICAgICAgICAgdGl0bGU6ICLpmYjlhqDluIwiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHk6IDAsIC8vIOaOp+WItuWQkeS4iuenu+WKqOeahOi3neemuwogICAgICBmbGFnOiBmYWxzZSwKICAgICAgbW92ZUluZGV4OiAwLCAvL+eUqOadpeiusOW9leW9k+WJjemhuQogICAgICBjbGllbnRZLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICByZW5kZXJMaXN0KCkgewogICAgICBsZXQgYXJ5ID0gW107CiAgICAgIGFyeSA9IHRoaXMubGlzdC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7CiAgICAgICAgLy8g5Yqg6L295b2T5YmN6aG555qE5LiK5LiA5LiqIOWSjCDkuIvkuIDkuKog6KeG5bGPIOaVsOe7hOmHjOS4gOWFseWwseS4ieS4quinhuWxjwogICAgICAgIGlmICgKICAgICAgICAgIGluZGV4ID09IHRoaXMubW92ZUluZGV4IHx8CiAgICAgICAgICBpbmRleCA9PSB0aGlzLm1vdmVJbmRleCAtIDEgfHwKICAgICAgICAgIGluZGV4ID09IHRoaXMubW92ZUluZGV4ICsgMQogICAgICAgICkgewogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhhcnkpOwogICAgICByZXR1cm4gYXJ5OwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHN0YXJ0KGUpIHsKICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuc3RhcnRZID0gZS50b3VjaGVzWzBdLnBhZ2VZOwogICAgICB0aGlzLnN0YXJ0TW92ZVkgPSB0aGlzLnk7IC8vIOW9k+WJjei/measoeenu+WKqOS5i+WJjeW3sue7j+enu+WKqOeahOi3neemuwogICAgfSwKICAgIG1vdmUoZSkgewogICAgICBsZXQgbW92ZVkgPSBlLnRvdWNoZXNbMF0ucGFnZVkgLSB0aGlzLnN0YXJ0WTsKICAgICAgdGhpcy55ID0gbW92ZVkgKyB0aGlzLnN0YXJ0TW92ZVk7CiAgICB9LAogICAgZW5kKGUsIG4pIHsKICAgICAgLy8g5p2+5omL5pe256e75Yqo55qE6Led56a7CiAgICAgIGxldCBlbmRZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSAtIHRoaXMuc3RhcnRZOwogICAgICAvLyDnp7vliqjnmoTot53nprvkuI3otoXov4cxLzQg5Zue5Yiw5Y6f5L2NICwg5aSn5LqOMS805bGP5bCx5ruR5YCS5LiL5LiA5LiqCiAgICAgIGlmIChNYXRoLmFicyhlbmRZKSA8IGNsaWVudFkgLyA0KSB7CiAgICAgICAgdGhpcy55ID0gdGhpcy5zdGFydE1vdmVZOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWQkeS4iua7kSDnnIvkuIvkuIDkuKrop4blsY8KICAgICAgICBpZiAoZW5kWSA8IDApIHsKICAgICAgICAgIC8vIOivtOaYjuW9k+WJjeinhuWxj+S4i+mdoui/mOacieinhuWxjwogICAgICAgICAgaWYgKHRoaXMubGlzdFtuICsgMV0pIHsKICAgICAgICAgICAgLy8g5Zyo5b2T5YmN55qE5Z+656GA5LiLIOW+gOS4i+a7keWKqOS4gOWxjwogICAgICAgICAgICB0aGlzLnkgPSB0aGlzLnN0YXJ0TW92ZVkgLSBjbGllbnRZOwogICAgICAgICAgICB0aGlzLm1vdmVJbmRleCsrOwogICAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgICAgLy8g6L+Z6YeM55SocmVm6I635Y+W5Lya5pyJ54K5YnVnCiAgICAgICAgICAgICAgbGV0IHZpZGVvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInZpZGVvIik7CiAgICAgICAgICAgICAgLy8gIOS4gOWFseWwseS4ieS4quinhuWxjyDpg73mmK/ntKLlvJXkuLox55qE5pKt5pS+IOe0ouW8leS4ujDlkowy55qE5pqC5YGcCiAgICAgICAgICAgICAgLy8g5b6A5LiL5ruR5YqoIOW9k+WJjeaSreaUvueahOeahOawuOi/nOmDveaYr+e0ouW8leS4ujHnmoTpgqPkuIDpobkKICAgICAgICAgICAgICB2aWRlb3NbMF0gJiYgdmlkZW9zWzBdLnBhdXNlKCk7CiAgICAgICAgICAgICAgdmlkZW9zWzJdICYmIHZpZGVvc1syXS5wYXVzZSgpOwogICAgICAgICAgICAgIGlmICh2aWRlb3NbMV0pIHsKICAgICAgICAgICAgICAgIHZpZGVvc1sxXS5jdXJyZW50VGltZSA9IDA7IC8vIOavj+asoeS7juWktOW8gOWni+aSreaUvgogICAgICAgICAgICAgICAgLy92aWRlb3NbMV0ubXV0ZWQgPSBmYWxzZTsgLy8g5Y+W5raI6Z2Z6Z+zIOi/memHjOWKoOS4iuS8muaKpemUmSDorqlhcHDljrvorr7nva7oh6rliqjmkq3mlL7lsLHlpb3kuoYKICAgICAgICAgICAgICAgIHZpZGVvc1sxXS5wbGF5KCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIOS4i+mdouayoeacieinhuWxj+S6hiDlm57liLDlvZPliY3op4blsY8g5oiW6ICF5Y+v5Lul5YGa5Liq5Yqg6L295pu05aSaCiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuc3RhcnRNb3ZlWTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8g5ZCR5LiL5ruRIOeci+S4iuS4gOS4quinhuWxjwogICAgICAgICAgLy8g6K+05piO5b2T5YmN6KeG5bGP5LiK6Z2i6L+Y5pyJ6KeG5bGPCiAgICAgICAgICBpZiAodGhpcy5saXN0W24gLSAxXSkgewogICAgICAgICAgICAvLyDlnKjlvZPliY3nmoTln7rnoYDkuIsg5b6A5LiK5ruR5Yqo5LiA5bGPCiAgICAgICAgICAgIHRoaXMueSA9IHRoaXMuc3RhcnRNb3ZlWSArIGNsaWVudFk7CiAgICAgICAgICAgIHRoaXMubW92ZUluZGV4LS07CiAgICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgICBsZXQgdmlkZW9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidmlkZW8iKTsKICAgICAgICAgICAgICAvLyDlvoDkuIrmu5Hliqgg5b2T5YmN5pKt5pS+55qEIOaYr+e0ouW8leS4ujHnmoTpgqPkuIDpobkg5ZKMIOe0ouW8leS4ujDnmoTpgqPkuIDpobko5ruR5YCS56ys5LiA5LiqKQogICAgICAgICAgICAgIGlmICh0aGlzLm1vdmVJbmRleCA9PSAwKSB7CiAgICAgICAgICAgICAgICB2aWRlb3NbMV0gJiYgdmlkZW9zWzFdLnBhdXNlKCk7CiAgICAgICAgICAgICAgICBpZiAodmlkZW9zWzBdKSB7CiAgICAgICAgICAgICAgICAgIHZpZGVvc1swXS5jdXJyZW50VGltZSA9IDA7CiAgICAgICAgICAgICAgICAgIHZpZGVvc1swXS5wbGF5KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHZpZGVvc1swXSAmJiB2aWRlb3NbMF0ucGF1c2UoKTsKICAgICAgICAgICAgICAgIHZpZGVvc1syXSAmJiB2aWRlb3NbMl0ucGF1c2UoKTsKICAgICAgICAgICAgICAgIGlmICh2aWRlb3NbMV0pIHsKICAgICAgICAgICAgICAgICAgdmlkZW9zWzFdLmN1cnJlbnRUaW1lID0gMDsKICAgICAgICAgICAgICAgICAgdmlkZW9zWzFdLnBsYXkoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5LiK6Z2i5rKh5pyJ6KeG5bGP5LqGIOWbnuWIsOW9k+WJjeinhuWxjyDmiJbogIXlj6/ku6XlgZrkuKrliLfmlrDmiYDmnInop4blsY8KICAgICAgICAgICAgdGhpcy55ID0gdGhpcy5zdGFydE1vdmVZOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLmZsYWcgPSB0cnVlOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div class=\"dy_box\">\n    <div\n      class=\"list_box\"\n      :class=\"{ animateClass: flag }\"\n      :style=\"{\n        transform: `translateY(${y}px)`,\n        paddingTop: (moveIndex ? moveIndex - 1 : 0) * clientY + 'px',\n      }\"\n    >\n      <!-- 加paddingTop把高度撑起来 第0个视屏不需要撑 以后的每个视屏撑之前所有视屏的高度  -->\n      <template v-for=\"(item, index) in renderList\">\n        <div\n          v-if=\"item\"\n          class=\"video_box\"\n          :key=\"item.id\"\n          @touchstart=\"start\"\n          @touchmove=\"move\"\n          @touchend=\"end($event, index)\"\n        >\n          <video\n            ref=\"video\"\n            :src=\"item.src\"\n            class=\"video\"\n            :muted=\"item.muted\"\n            :autoplay=\"index == 0\"\n            loop\n          ></video>\n          <div class=\"content_box\">\n            <p class=\"title\">{{ item.title }}</p>\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<script>\nlet clientY =\n  document.body.clientHeight || document.documentElement.clientHeight;\nexport default {\n  data() {\n    return {\n      list: [\n        // muted 控制静音\n        {\n          id: 1,\n          muted: true,\n          src: require(\"./assets/videos/1.mp4\"),\n          title: \"阜阳\",\n        },\n        {\n          id: 2,\n          muted: true,\n          src: require(\"./assets/videos/2.mp4\"),\n          title: \"王嘉尔\",\n        },\n        {\n          id: 3,\n          muted: true,\n          src: require(\"./assets/videos/3.mp4\"),\n          title: \"安东尼\",\n        },\n        {\n          id: 4,\n          muted: true,\n          src: require(\"./assets/videos/4.mp4\"),\n          title: \"魏晨\",\n        },\n        {\n          id: 5,\n          muted: true,\n          src: require(\"./assets/videos/5.mp4\"),\n          title: \"陈冠希\",\n        },\n      ],\n      y: 0, // 控制向上移动的距离\n      flag: false,\n      moveIndex: 0, //用来记录当前项\n      clientY,\n    };\n  },\n  computed: {\n    renderList() {\n      let ary = [];\n      ary = this.list.map((item, index) => {\n        // 加载当前项的上一个 和 下一个 视屏 数组里一共就三个视屏\n        if (\n          index == this.moveIndex ||\n          index == this.moveIndex - 1 ||\n          index == this.moveIndex + 1\n        ) {\n          return item;\n        } else {\n          return \"\";\n        }\n      });\n      console.log(ary);\n      return ary;\n    },\n  },\n  methods: {\n    start(e) {\n      this.flag = false;\n      this.startY = e.touches[0].pageY;\n      this.startMoveY = this.y; // 当前这次移动之前已经移动的距离\n    },\n    move(e) {\n      let moveY = e.touches[0].pageY - this.startY;\n      this.y = moveY + this.startMoveY;\n    },\n    end(e, n) {\n      // 松手时移动的距离\n      let endY = e.changedTouches[0].pageY - this.startY;\n      // 移动的距离不超过1/4 回到原位 , 大于1/4屏就滑倒下一个\n      if (Math.abs(endY) < clientY / 4) {\n        this.y = this.startMoveY;\n      } else {\n        // 向上滑 看下一个视屏\n        if (endY < 0) {\n          // 说明当前视屏下面还有视屏\n          if (this.list[n + 1]) {\n            // 在当前的基础下 往下滑动一屏\n            this.y = this.startMoveY - clientY;\n            this.moveIndex++;\n            this.$nextTick(() => {\n              // 这里用ref获取会有点bug\n              let videos = document.getElementsByClassName(\"video\");\n              //  一共就三个视屏 都是索引为1的播放 索引为0和2的暂停\n              // 往下滑动 当前播放的的永远都是索引为1的那一项\n              videos[0] && videos[0].pause();\n              videos[2] && videos[2].pause();\n              if (videos[1]) {\n                videos[1].currentTime = 0; // 每次从头开始播放\n                //videos[1].muted = false; // 取消静音 这里加上会报错 让app去设置自动播放就好了\n                videos[1].play();\n              }\n            });\n          } else {\n            // 下面没有视屏了 回到当前视屏 或者可以做个加载更多\n            this.y = this.startMoveY;\n          }\n        } else {\n          // 向下滑 看上一个视屏\n          // 说明当前视屏上面还有视屏\n          if (this.list[n - 1]) {\n            // 在当前的基础下 往上滑动一屏\n            this.y = this.startMoveY + clientY;\n            this.moveIndex--;\n            this.$nextTick(() => {\n              let videos = document.getElementsByClassName(\"video\");\n              // 往上滑动 当前播放的 是索引为1的那一项 和 索引为0的那一项(滑倒第一个)\n              if (this.moveIndex == 0) {\n                videos[1] && videos[1].pause();\n                if (videos[0]) {\n                  videos[0].currentTime = 0;\n                  videos[0].play();\n                }\n              } else {\n                videos[0] && videos[0].pause();\n                videos[2] && videos[2].pause();\n                if (videos[1]) {\n                  videos[1].currentTime = 0;\n                  videos[1].play();\n                }\n              }\n            });\n          } else {\n            // 上面没有视屏了 回到当前视屏 或者可以做个刷新所有视屏\n            this.y = this.startMoveY;\n          }\n        }\n      }\n      this.flag = true;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n* {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n.dy_box {\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  background: #000;\n  .list_box {\n    .video_box {\n      position: relative;\n      width: 100%;\n      height: 100vh;\n      .video {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 10;\n        background: #000;\n      }\n      .content_box {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        z-index: 20;\n        background: rgba(0, 0, 0, 0);\n        .title {\n          position: absolute;\n          bottom: 50px;\n          color: #fff;\n          padding: 20px;\n          box-sizing: border-box;\n          font-size: 30px;\n        }\n      }\n    }\n  }\n  // 不直接给 list_box 加过度效果是因为 只有在手指松开的才有过渡 手指滑动的时候不需要加过渡\n  .animateClass {\n    transition: transform 0.5s;\n  }\n}\n</style>"]}]}